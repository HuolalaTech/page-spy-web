import offlineLogImg from '@/assets/image/screenshot/v1.9.2-offline-log-size.png';
import harborRecordStatusImg from '@/assets/image/screenshot/harbor-record-status-en.gif';

## v2.4.0

- 🆕 ブラウザと ReactNative で WebSocket リクエストを表示できるようになりました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/143;
- 🐛 NPM パッケージのワークフローで依存関係のパッケージバージョンが正しくない問題を修正しました;

## v2.3.3

- 🐛 v2.3.2 イメージに libc.so が不足している問題を修正しました;

## v2.3.2

- 🆕 MySQL を使用してオフラインログデータを永続化する機能を追加しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-api/issues/15;
- 🆕 複数コンテナをデプロイする場合、IP アドレスの代わりに DNS 名を使用する機能を追加しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-api/issues/16;
- 🐛 いくつかの問題を修正しました;

## v2.3.1

- 🐛 v2.3.0 バージョンの認証機能の問題を修正しました。使用方法は変更ありません。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/343;

## v2.3.0

> ⚠️ <b style={{ color: '#ff4d4f' }}>注意：v2.3.0 バージョンの認証機能に問題があります。[v2.3.1](#v2-3-1) バージョンを使用してください。</b>

- 🆕 デバッガーのセキュリティを保護するためのパスワード設定機能を追加しました。[使用ガイド](./faq#security)をクリックしてご覧ください。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/333, https://github.com/HuolalaTech/page-spy-api/pull/13;

## v2.2.4

- 🐛 ブラウザ SDK で低バージョンのブラウザでリソース収集が正常に動作しない問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/140;

## v2.2.3

- 🆕 「録音を一時停止」状態のダイアログのインタラクションを最適化しました;
- 🆕 デバッグ端でオフラインログファイルをグローバルにドラッグして再生できるようになりました;
- 🆕 SDK 更新設定の検証。エラーメッセージがより使いやすくなりました。詳細はこちらをご覧ください：https://github.com/HuolalaTech/page-spy/pull/138;
- 🐛 回放ページで再生できない問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/324;
- 🐛 ドラッグ時に iframe 要素を越えるとフローティングボールが追従しない問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/137;

## v2.2.2

- 🆕 録音状態（録音中 / 一時停止中）情報が SDK ポップアップに表示され、録音状態をクリックして切り替えることができます。
  <a href={harborRecordStatusImg} target="_blank">
    <img src={harborRecordStatusImg} />
  </a>

## v2.2.1

- 🎉 公式ブラウザ拡張機能 [PageSpy](https://chromewebstore.google.com/detail/pagespy/kpfigmbgeedkgnjnlpilghiffepahlmk) が Chrome ウェブストアで利用可能になりました。ダウンロードしてご利用ください。
- 🆕 [O-Spy](/o-spy) サービスを追加しました。敷居はなく、1行のコードでアクセス可能です。
- 🆕 ドキュメント検索をサポートし、**⌘ + K**（Windows: Ctrl + K）で体験できます。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/320
- 🆕 ユーザーエクスペリエンスの最適化を行いました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/317
  - コンソールパネルは仮想スクロールを使用し、大規模データセットでのパフォーマンスが大幅に向上しました。
  - ネットワーク/ストレージパネルは、テーブルヘッダーをクリックしてソートをサポートします。
  - リプレイページのユーザー操作軌跡にマウスポインターが追加されました。
- 🐛 いくつかの問題を修正しました。

## v2.2.0

- 🆕 公式サイトに O-Spy が公開されました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/315;
- 🆕 新しい [@huolala-tech/page-spy-plugin-ospy](https://github.com/HuolalaTech/page-spy/tree/main/packages/page-spy-plugin-ospy) オフライン記録プラグインを追加しました;
- 🟡 [@huolala-tech/page-spy-plugin-whole-bundle](https://github.com/HuolalaTech/page-spy/tree/main/packages/page-spy-whole-bundle) は廃止され、新機能は追加されません;

## v2.1.3

- 🐛 リプレイページの Network パネルにフィルター機能を追加しました;

## v2.1.2

- 🆕 リプレイページのユーザートレースパネルが基本的な選択操作をサポートするようになりました;
- 🆕 ウェブページの静的リソースリクエストの表示をサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/309;
- 🐛 ブラウザ SDK の操作時間範囲ログがエラーを引き起こす問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/131;
- 🐛 非同期コピーが失敗する問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/130;
- 🐛 `uni.request` の戻り値の問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/306;

## v2.1.1

- 🆕 ブラウザ SDK がジェスチャーで動的に起動することをサポートしました。 [使用説明](./pagespy#config-gesture) を参照してください;
  ```ts
  new PageSpy({
    ...,
    gesture: ['U', 'U', 'D', 'D', 'L', 'R', 'L', 'R'],
  })
  ```

## v2.1.0

- 🆕 `WholeBundlePlugin` をリファクタリングし、公式サイトのリプレイラボページを更新しました：https://github.com/HuolalaTech/page-spy/pull/125 、https://github.com/HuolalaTech/page-spy-web/pull/304;
- 🆕 ソースコードの位置特定機能を最適化しました：https://github.com/HuolalaTech/page-spy-web/pull/300;
- 🆕 ミニプログラムに **System** パネルを追加しました：https://github.com/HuolalaTech/page-spy/pull/123 、https://github.com/HuolalaTech/page-spy-web/pull/299;
- 🆕 ミニプログラムのオフラインログ機能の互換性を最適化しました;
- 🆕 フローティングボールの位置を記憶する機能を追加しました：https://github.com/HuolalaTech/page-spy/pull/126;
- 🆕 ブラウザ SDK に CSS 特性検出機能を追加しました：https://github.com/HuolalaTech/page-spy/pull/128;
- 🐛 いくつかの問題を修正しました;

## v2.0.2

- 🐛 `DataHarborPlugin` のデフォルト値がダウンロードに失敗する問題を修正しました;

## v2.0.1

- 🆕 `DataHarborPlugin` に [onAfterUpload](./data-harbor#constructor) パラメータを追加し、アップロード後の動作をカスタマイズできるようにしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/119;
- 🐛 いくつかの問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/118 、https://github.com/HuolalaTech/page-spy/pull/120;

## v2.0.0

- 🆕 ブラウザポップアップの改訂版がリリースされ、テーマカラーやブランドのカスタマイズ、時間範囲ログセレクター、メモフィールドが追加されました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/113;
- 🆕 ミニプログラムでポップアップを表示する方法が追加され、オフラインログのアップロードをサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/112;
- 🐛 いくつかの問題を修正しました;

## v1.9.6

- 🆕 DataHarborPlugin プラグインに新しいプロトタイプメソッドを追加しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/110;
  - `$harbor.pause()`：記録を一時停止します;
  - `$harbor.resume()`: 記録を再開します。`pause()` と対応しています;
  - `$harbor.reharbor()`：記録されたデータをクリアし、再作成します。
- 🆕 リプレイページで「オブジェクトを展開できない」場合のヒントを追加しました;
- 🐛 `application/x-www-form-urlencoded` のペイロード表示を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/267;

## v1.9.5

- 🆕 DockerHub イメージを追加しました: https://hub.docker.com/r/huolalatech/page-spy-web;
- 🆕 宝塔のワンクリックデプロイメントドキュメントを追加しました;

## v1.9.4

- 🐛 いくつかの問題を修正しました;

## v1.9.3

- 🆕 デバッグ端の Network パネルにキーワードフィルタリングを追加しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/262;
- 🆕 デバッグ端のログリプレイページの Console パネルがスクロールに追従し、メッセージ通知を最適化しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/264;
- 🐛 SDK の `ErrorPlugin` のエラーメッセージを最適化しました;

## v1.9.2

- 🆕 インスタンス化パラメータに `dataProcessor` オプションを追加し、データのフィルタリングや処理を行えるようにしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/106;

  <blockquote>
    <details>
      <summary>サンプルを表示するにはクリックしてください。</summary>
      ```ts
      window.$pageSpy = new PageSpy({
        ...,
        dataProcessor: {
          console: (data) => {
            // 出力内容に "secret" 文字が含まれている場合は無視（デバッグ端に送信されません）
            if (data.logs.some(i => typeof i === 'string' && i.includes('secret'))) return false;
          },
          network: (data) => {
            // データポイントのリクエストを無視
            if (/(sentry|metric|collect)/.test(data.url)) return false
          },,
          storage: (data) => {
            // cookie のキーがアンダースコアで始まる場合、デバッグ端で見える値を "*******" にする
            if (data.type === "cookie" && data.action === "get") {
              data.data.forEach((i) => {
                if (i.name.startsWith("_")) {
                  i.value = "*******";
                }
              });
            }
          },
        },
      });
      ```
    </details>
  </blockquote>

- 🆕 アップロードされるログデータを調整しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/107;

  <img src={offlineLogImg} />

- 🆕 インタラクションを調整しました。
  - ログリプレイの進行バーをクリックすると再生状態を保持します。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/258;
  - テーブルヘッダーがドラッグ可能になりました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/257;
  - Huawei ブラウザの識別をサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/256;

## v1.9.1

- 🆕 インスタンス化パラメータに `serializeData` オプションを追加し、非基本型データのシリアル化を許可するようにしました。デフォルト値は `false` です。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/103 / https://github.com/HuolalaTech/page-spy-web/pull/241;

  有効にすると、console のデータがログリプレイページで展開できるようになります。使用方法：

  ```ts
  window.$pageSpy = new PageSpy({
    ...
    // 注意：シリアル化過程で副作用が発生する可能性があるため、デフォルトでは false に設定されています;
    serializeData: true
  })
  ``` 

- 🆕 Network パネルの表示情報を最適化しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/239;
- 🆕 リプレイページで canvas の内容を再生できるようになりました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/238;
- 🆕 リプレイページで操作軌跡の表示を最適化しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/244 / https://github.com/HuolalaTech/page-spy-web/pull/247;
- 🐛 いくつかの問題を修正しました;

## v1.9.0

- 🆕 新しいドキュメントページがリリースされました;
- 🆕 動的実行コードの能力を小さなプログラム SDK から独立したプラグイン [@huolala-tech/page-spy-plugin-mp-eval](https://www.npmjs.com/package/@huolala-tech/page-spy-plugin-mp-eval) に抽出し、小さなプログラムの審査に対する影響を軽減しました;
- 🆕 小さなプログラムの互換性を最適化しました：https://github.com/HuolalaTech/page-spy-web/issues/199;
- 🐛 小さなプログラムの `getAccountInfoSync` 互換性の問題を修正しました: https://github.com/HuolalaTech/page-spy-web/issues/213;
- 🐛 小さなプログラムの `updateRoomInfo` 型定義を透過的に渡す問題を修正しました: https://github.com/HuolalaTech/page-spy-web/issues/213;

## v1.8.10

本更新では「エラー位置特定」機能に対して多くの最適化を行いました。具体的な内容は以下の通りです：

- 🆕 「ログリプレイページ」のエラーにもソースコードの位置特定機能をサポートしました;
- 🆕 以前はエラーのみサポートしていたソースコードの位置特定機能を、console.xxx(`Error`) にも対応させました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/212;
- 🆕 ソースコードの位置特定機能で、`\t` が存在する場合に 1 つのタブ = N 個のスペースに変換するオプションを追加しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/212;
- 🐛 ロゴのインタラクションの問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/211;

## v1.8.9

- 🆕 `React Native` アプリケーションのデバッグをサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/87 / https://github.com/HuolalaTech/page-spy-web/pull/190;
- 🆕 `鸿蒙 App` のデバッグをサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/88 / https://github.com/HuolalaTech/page-spy-web/pull/191;
- 🆕 Web アプリケーションで `EventSource` リクエストのレスポンスデータを表示できるようになりました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/206 / https://github.com/HuolalaTech/page-spy-web/issues/202 / https://github.com/HuolalaTech/page-spy-web/issues/183;
- 🆕 メッセージタイプを最適化し、デバッグ端のインタラクションがより迅速になりました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/91 / https://github.com/HuolalaTech/page-spy-web/pull/201;
- 🆕 ルームリストページで最大 30 個のパネルを表示するように制限しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/204;
- 🐛 `pageSpy.abort()` が誤ってイベントをクリアする問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/205 / https://github.com/HuolalaTech/page-spy/pull/95;

## v1.8.8

- 🆕 ログリプレイページのオフラインログの再生インタラクションを最適化しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/186;
- 🆕 UniApp をネイティブアプリにパッケージングした場合のデバッグをサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/90 / https://github.com/HuolalaTech/page-spy-web/pull/197;
- 🐛 ネットワークリクエストヘッダーに自己参照が存在する場合のパネルの表示が不正確になる問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/89 / https://github.com/HuolalaTech/page-spy-web/issues/193;
- 🐛 Page パネルの HTML タグの表示が不正確になる問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/pull/196;

## v1.8.7

- 🆕 SDK のメッセージ送信タイミングを最適化しました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/84;
- 🐛 SDK の再接続が異常になる問題を修正しました;

## v1.8.6

- 🆕 SDK が断続的に接続を失った場合、指数関数的に再接続を試みます（強制的にルームを作成します）。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/78;
- 🆕 SDK に `useSecret` パラメータを追加し、デフォルト値は `false` です。設定すると SDK はルームを生成する際に 6 桁のランダムパスワードを使用します。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/78;
- 🆕 動的に `title` / `project` パラメータを更新できるようになりました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/78;
- 🆕 ブラウザ SDK のフローティングボールが上、下、左、右に配置された場合、自動的に収まるようになりました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/80;
- 🆕 デバッグ端のルームリストページの表示を最適化しました;
- 🆕 サーバーのログデータシリアル化を最適化し、パフォーマンスを大幅に向上させました;
- 🐛 いくつかの問題を修正しました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/172 / https://github.com/HuolalaTech/page-spy/pull/79;

## v1.8.5

- 🆕 サポートされていないシステムアーキテクチャを削除しました;

## v1.8.4

- 🆕 SDK のキャッシュポリシーを最適化し、メモリ使用量を大幅に減らしました。詳細はこちら：https://github.com/HuolalaTech/page-spy-web/issues/169;

## v1.8.3

- 🆕 Taro アプリケーションのデバッグをサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/83 / https://github.com/HuolalaTech/page-spy-web/pull/184;
- 🆕 鸿蒙 App のデバッグをサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/84 / https://github.com/HuolalaTech/page-spy-web/pull/185;
- 🐛 NetworkPlugin のリクエストエラー時の処理動作を最適化しました;

## v1.8.2

- 🆕 前のバージョンの npm パッケージが一部のシステムアーキテクチャでインストールできない問題を修正しました;

## v1.8.1

- 🆕 小さなプログラムの統合ドキュメントに「注意事項」を追加しました;
- 🆕 ログリプレイページの進捗バーにアクティビティの集計情報を表示しました;

## v1.8.0

- 🆕 小さなプログラムでコードを送信して実行する機能をサポートしました;
- 🆕 `DataHarborPlugin` はオフラインログをアップロードする機能をサポートしました。詳細はこちら：https://github.com/HuolalaTech/page-spy/pull/76 / https://github.com/HuolalaTech/page-spy-web/pull/173;
- 🆕 ログリプレイページの機能を最適化しました：サイズの変更、倍速再生;

## More...

以前のリリース内容はこちら：https://github.com/HuolalaTech/page-spy-web/releases を参照してください。 