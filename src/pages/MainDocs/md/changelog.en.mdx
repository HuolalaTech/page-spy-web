import offlineLogImg from '@/assets/image/screenshot/v1.9.2-offline-log-size.png';
import harborRecordStatusImg from '@/assets/image/screenshot/harbor-record-status-en.gif';

## v2.4.1

- ğŸ› Fix the issue where the WebSocket plugin in the SDK cannot work normally;
- ğŸ› Fix the issue where the debugger handles WebSocket / EventSource request response data processing;

## v2.4.0

- ğŸ†• Support viewing WebSocket requests in browser and ReactNative, see details: https://github.com/HuolalaTech/page-spy/pull/143;
- ğŸ› Fix the issue where the dependency package version is incorrect when publishing the npm package workflow;

## v2.3.3

- ğŸ› Fix the issue where the image missing libc.so in v2.3.2;

## v2.3.2

- ğŸ†• Support configuring mysql for persisting offline log data, see details: https://github.com/HuolalaTech/page-spy-api/issues/15;
- ğŸ†• Support using dns name instead of IP address when deploying multiple containers, see details: https://github.com/HuolalaTech/page-spy-api/issues/16;
- ğŸ› Fix some issues;

## v2.3.1

- ğŸ› Fix the issue where the authentication function in v2.3.0 version. The usage remains unchanged. For details, see: https://github.com/HuolalaTech/page-spy-web/pull/343;

## v2.3.0

> âš ï¸ <b style={{ color: '#ff4d4f' }}>Note: The authentication in v2.3.0 version has a problem, please use [v2.3.1](#v2-3-1) version.</b>

- ğŸ†• Added password protection for debugger security when starting the service. Click to view [Usage Guide](./faq#security). For details, see: https://github.com/HuolalaTech/page-spy-web/pull/333, https://github.com/HuolalaTech/page-spy-api/pull/13;

## v2.2.4

- ğŸ› Browser SDK fixes the issue where the resource collector does not work in low-version browsers, see details: https://github.com/HuolalaTech/page-spy/pull/140;

## v2.2.3

- ğŸ†• Optimize the interaction of the "Pause Recording" status dialog;
- ğŸ†• The debug client now supports dragging offline log files to replay globally;
- ğŸ†• SDK update configuration verification, error message optimization, see details: https://github.com/HuolalaTech/page-spy/pull/138;
- ğŸ› Fix the issue where the replay page cannot play, see details: https://github.com/HuolalaTech/page-spy-web/pull/324;
- ğŸ› Fix the issue where the floating ball does not follow the mouse when cross over iframe element, see details: https://github.com/HuolalaTech/page-spy/pull/137;

## v2.2.2

- ğŸ†• The recording status (recording / paused) information is now displayed in the SDK popup, and the recording status can be toggled by clicking;
  <a href={harborRecordStatusImg} target="_blank">
    <img src={harborRecordStatusImg} />
  </a>

## v2.2.1

- ğŸ‰ Official browser extension [PageSpy](https://chromewebstore.google.com/detail/pagespy/kpfigmbgeedkgnjnlpilghiffepahlmk) is now available on the Chrome Web Store, welcome to download and use;
- ğŸ†• Add [O-Spy](/o-spy) service, no threshold, one line of code to access;
- ğŸ†• Document support search, **âŒ˜ + K** (Windows: Ctrl + K) to experience, see details: https://github.com/HuolalaTech/page-spy-web/pull/320;
- ğŸ†• User experience optimization, see details: https://github.com/HuolalaTech/page-spy-web/pull/317;
  - Console panel uses virtual scrolling, significantly improving performance for large data sets;
  - Network / Storage panels support sorting by clicking the table header;
  - User operation trajectory on the replay page now includes the mouse pointer;
- ğŸ› Fix some issues;

## v2.2.0

- ğŸ†• O-Spy is now live on our official website! See details: https://github.com/HuolalaTech/page-spy-web/pull/315;
- ğŸ†• Introducing the new [@huolala-tech/page-spy-plugin-ospy](https://github.com/HuolalaTech/page-spy/tree/main/packages/page-spy-plugin-ospy) plugin for offline recording;
- ğŸŸ¡ [@huolala-tech/page-spy-plugin-whole-bundle](https://github.com/HuolalaTech/page-spy/tree/main/packages/page-spy-whole-bundle) is deprecated;

## v2.1.3

- ğŸ› Add filter on the Network table in the replay page;

## v2.1.2

- ğŸ†• The rrwebPlayer panel on the replay page now supports basic selection operations.
- ğŸ†• Support for viewing static resource requests on web pages. See details: https://github.com/HuolalaTech/page-spy-web/pull/309.
- ğŸ› Fix an issue in the browser SDK where operation time range logs would cause errors. See details: https://github.com/HuolalaTech/page-spy/pull/131.
- ğŸ› Fix an issue in the browser SDK where asynchronous copying could fail. See details: https://github.com/HuolalaTech/page-spy/pull/130.
- ğŸ› Fix the `uni.request` return value issue. See details: https://github.com/HuolalaTech/page-spy-web/issues/306.

## v2.1.1

- ğŸ†• The browser-side SDK now supports gesture-based activation. See [use guide](./pagespy#config-gesture):
  ```ts
  new PageSpy({
    ...,
    gesture: ['U', 'U', 'D', 'D', 'L', 'R', 'L', 'R'],
  })
  ```

## v2.1.0

- ğŸ†• Refactor `WholeBundlePlugin` and updated the Replay Lab page on the official website. See details: https://github.com/HuolalaTech/page-spy/pull/125, https://github.com/HuolalaTech/page-spy-web/pull/304;
- ğŸ†• Optimize the function for locating the source code. See details: https://github.com/HuolalaTech/page-spy-web/pull/300;
- ğŸ†• Add **System** panel for mini-programs: https://github.com/HuolalaTech/page-spy/pull/123, https://github.com/HuolalaTech/page-spy-web/pull/299;
- ğŸ†• Optimized compatibility of the offline logging feature for mini programs: https://github.com/HuolalaTech/page-spy/pull/127;
- ğŸ†• Add position cache for floating ball: https://github.com/HuolalaTech/page-spy/pull/126;
- ğŸ†• Add CSS feature detection in browser SDK: https://github.com/HuolalaTech/page-spy/pull/128;
- ğŸ› Fixed some issues.

## v2.0.2

- ğŸ› Fixed the issue where the default value of DataHarborPlugin caused download failure.

## v2.0.1

- ğŸ†• `DataHarborPlugin` add [onAfterUpload](./data-harbor#constructor) param to custom behavior after uploadã€‚See details: https://github.com/HuolalaTech/page-spy/pull/119;
- ğŸ› Fix some issues. See details: https://github.com/HuolalaTech/page-spy/pull/118 / https://github.com/HuolalaTech/page-spy/pull/120;

## v2.0.0

- ğŸ†• Revamped browser-side modal with support for custom theme colors and branding. Added a time-range log selector and a notes field. See details: https://github.com/HuolalaTech/page-spy/pull/113
- ğŸ†• Added a method for mini-programs to trigger a modal displaying PageSpy information, with support for uploading offline logs. See details: https://github.com/HuolalaTech/page-spy/pull/112
- ğŸ› Fixed some issues.

## v1.9.6

- ğŸ†• DataHarborPlugin added a new prototype method. See details: https://github.com/HuolalaTech/page-spy/pull/110;
  - `$harbor.pause()`: Pause recording;
  - `$harbor.resume()`: Resume recording, corresponding to `pause()`;
  - `$harbor.reharbor()`: Clear the recorded data and remakes it.
- ğŸ†• Add new prompt for "Object cannot be expanded" on the replay page;
- ğŸ› Fixed the display of `application/x-www-form-urlencoded` payload. See details: https://github.com/HuolalaTech/page-spy-web/issues/267;

## v1.9.5

- ğŸ†• Add DockerHub image: https://hub.docker.com/r/huolalatech/page-spy-web;
- ğŸ†• Support deploy with Baota and add deploy guideï¼›

## v1.9.4

- ğŸ› Fix some issues;

## v1.9.3

- ğŸ†• The Network panel now supports keyword filtering. View details: https://github.com/HuolalaTech/page-spy-web/pull/262 ;
- ğŸ†• The Console panel of the log replay page supports scroll following, optimize message notification. See details: https://github.com/HuolalaTech/page-spy-web/pull/264 ;
- ğŸ› SDK optimizes error messages for `ErrorPlugin`;

## v1.9.2

- The init parameters now include a `dataProcessor` option for filtering or processing data. See details: https://github.com/HuolalaTech/page-spy/pull/106;

  <blockquote>
    <details>
    <summary>Click to expand and view examples.</summary>
    ```ts
    window.$pageSpy = new PageSpy({
      ...,
      dataProcessor: {
        console: (data) => {
          // log will be ignored if the content includes 'secret'
          if (data.logs.some(i => typeof i === 'string' && i.includes('secret'))) return false;
        },
        network: (data) => {
          // ignore metric requests
          if (/(sentry|metric|collect)/.test(data.url)) return false
        },,
        storage: (data) => {
          // change the cookie to "******" if the name starts with _
          if (data.type === "cookie" && data.action === "get") {
            data.data.forEach((i) => {
              if (i.name.startsWith("_")) {
                i.value = "*******";
              }
            });
          }
        },
      },
    });
    ```
    </details>
  </blockquote>

- ğŸ†• Adjusted the uploaded log data, see details: https://github.com/HuolalaTech/page-spy/pull/107;

  <img src={offlineLogImg} />

- ğŸ†• Interaction adjustments:
  - Clicking on the log replay progress bar now maintains the playback state. See details: https://github.com/HuolalaTech/page-spy-web/pull/258;
  - The table header supports dragging, see details: https://github.com/HuolalaTech/page-spy-web/pull/257;
  - Added support for recognizing the Huawei browser, see details: https://github.com/HuolalaTech/page-spy-web/pull/256;

## v1.9.1

- ğŸ†• Added the `serializeData: boolean` option to the instantiation parameters, which specifies whether the SDK is allowed to serialize non-primitive data types when collecting offline data. Default is `false`. For more details, see: https://github.com/HuolalaTech/page-spy/pull/103.

  When enabled, data printed in the console can be expanded and viewed in the replay panel. Usage:

  ```ts
  window.$pageSpy = new PageSpy({
    ...
    // Note that serialization may have side effects, so it is disabled by default for safety;
    serializeData: true
  })
  ```

- ğŸ†• Optimized information display in the Network panel. For more details, see: https://github.com/HuolalaTech/page-spy-web/pull/239;
- ğŸ†• The replay panel now supports canvas content. For more details, see: https://github.com/HuolalaTech/page-spy-web/pull/238;
- ğŸ†• The left-side player during playback now shows "click" actions. The progress bar now only shows clicks and errors, with other data activities notified through the Tab. For more details, see: https://github.com/HuolalaTech/page-spy-web/pull/247;
- ğŸ› Fixed the interaction of the replay log list. For more details, see: https://github.com/HuolalaTech/page-spy-web/pull/242;
- ğŸ› Fixed several issues:
  - Server-side cross-origin configuration not taking effect;
  - Slow log deletion speed on the server side;
  - Offline logs now record the full lifecycle of network requests;
  - Formatted file names for SDK downloads;

## v1.9.0

- ğŸ†• All brand new document page;
- ğŸ†• The ability to dynamically execute code has been extracted from the mini-program SDK and encapsulated into an independent plugin, [@huolala-tech/page-spy-plugin-mp-eval](https://www.npmjs.com/package/@huolala-tech/page-spy-plugin-mp-eval), in order to minimize the impact on the review process for mini-programs;
- ğŸ†• Support miniprogram feature that transfer request payload to query string in GET request: https://github.com/HuolalaTech/page-spy-web/issues/199;
- ğŸ› Fix compatibility issue of `getAccountInfoSync` in miniprogram SDK: https://github.com/HuolalaTech/page-spy-web/issues/213;
- ğŸ› Fix type declaration of `updateRoomInfo` in miniprogram SDK: https://github.com/HuolalaTech/page-spy-web/issues/213;

### v1.8.10

This update primarily focuses on optimizing the "Error Source Code Location" feature. Specific changes include:

- ğŸ†• Enhanced error source code location support in the "Log Replay" page;
- ğŸ†• Added support for locating source code in console.xxx(Error) logs, in addition to captured errors. Details can be viewed in https://github.com/HuolalaTech/page-spy-web/pull/212;
- ğŸ†• Provided an option to configure tab characters (`\t`) in source code, allowing users to set 1 tab = N spaces;
- ğŸ› Fixed interaction issues with the logo. Details in https://github.com/HuolalaTech/page-spy-web/issues/211;

## v1.8.9

- ğŸ†• Support for debugging React Native applications, related https://github.com/HuolalaTech/page-spy-web/pull/190;
- ğŸ†• Support for debugging HarmonyOS applications, related https://github.com/HuolalaTech/page-spy-web/pull/191 / https://github.com/HuolalaTech/page-spy/pull/88;
- ğŸ†• Web applications now support viewing `EventSource` request and response data, with an optimized network panel layout, related https://github.com/HuolalaTech/page-spy-web/pull/206 / https://github.com/HuolalaTech/page-spy-web/issues/202 / https://github.com/HuolalaTech/page-spy-web/issues/183;
- ğŸ†• Improved message types for faster debugging interface response, related https://github.com/HuolalaTech/page-spy-web/pull/201;
- ğŸ†• Room list page now limits the display to a maximum of 30 panels, related https://github.com/HuolalaTech/page-spy-web/pull/204;
- ğŸ› Fixed several issues, related https://github.com/HuolalaTech/page-spy-web/issues/205 / https://github.com/HuolalaTech/page-spy/pull/95;

## v1.8.8

- ğŸ†• Refactor the "/replay" page, making interactions smoother when playing back long and large offline log data, see https://github.com/HuolalaTech/page-spy-web/pull/186;
- ğŸ†• Adapted for "UniApp packaged as a native App", see https://github.com/HuolalaTech/page-spy-web/pull/197;
- ğŸ› Fixed an issue where a circual-reference in request headers caused the `Network` plugin to malfunction, see https://github.com/HuolalaTech/page-spy-web/pull/193;
- ğŸ› Fixed the display of HTML tags on the `Page` panel, see https://github.com/HuolalaTech/page-spy-web/pull/196;

## v1.8.7
- ğŸ†• The SDK doesn't send message until the developer enter room, see https://github.com/HuolalaTech/page-spy/pull/84;
- ğŸ› Fix the issue where reconnection after connection timeout;

## v1.8.6

- ğŸ†• After disconnection, the SDK will exponentially retry establishing connection, with a maximum interval not exceeding (1.5 ** 4 * 2000)ms, see https://github.com/HuolalaTech/page-spy/pull/78;
- ğŸ†• The SDK instantiation adds a new parameter `useSecret`, with a default value of `false`. When set to `true`, the SDK will generate a 6-digit random password for the room. The debugging terminal needs to know the client password before entering the debugging room, see https://github.com/HuolalaTech/page-spy/pull/78;
- ğŸ†• Support for dynamically updating the `title / project` parameters by using `window.$pageSpy.updateRoomInfo({ title: 'xxx', project: 'xxx' })`, see https://github.com/HuolalaTech/page-spy/pull/78;
- ğŸ†• After dragging the floating ball rendered by the browser SDK to the top, bottom, left, or right side, it will automatically retract, see https://github.com/HuolalaTech/page-spy/pull/80;
- ğŸ†• Support for get uploaded url, see https://github.com/HuolalaTech/page-spy/pull/81:

  ```js
  window.$harbor = new DataHarborPlugin()
  PageSpy.registerPlugin(window.$harbor)

  async function uploadLogManually() {
    const debugUrl = await window.$harbor.onOfflineLog('upload')
    console.log({ debugUrl })
  }
  ```

- ğŸ†• The `page-spy-api` no longer serializes data, resulting in a significant performance improvement;
- ğŸ› fix some problems, see: https://github.com/HuolalaTech/page-spy-web/issues/172, https://github.com/HuolalaTech/page-spy/pull/79;

## v1.8.5

- ğŸ†• remove the unsupported arch binary;

## v1.8.4

- ğŸ†• Optimize the message cache , see https://github.com/HuolalaTech/page-spy-web/issues/169

## v1.8.3

- ğŸ†• Support debug Taro miniprogram, see [@huolala-tech/page-spy-taro](https://github.com/HuolalaTech/page-spy/tree/main/packages/page-spy-taro);
- ğŸ†• Support debug HarmonyOS App, see [@huolala/page-spy-harmony](https://ohpm.openharmony.cn/#/cn/detail/@huolala%2Fpage-spy-harmony);

  > Developed based on OpenHarmony API 9.

- ğŸ› Fix response loss when an error occurs in NetworkPlugin

## v1.8.2

- ğŸ› Fixed the issue where the npm package from the 1.8.0 and 1.8.1 version couldn't be installed on certain system architectures;

## v1.8.1

- ğŸ†• Added pre-submission reminders to the mini-program integration documentation;
- ğŸ†• Log replay page: Progress bar displays aggregated activity events.

## v1.8.0

- ğŸ†• `DataHarborPlugin` now supports uploading offline logs, and the debugging end has added a `https://<your-pagespy-host>/#/log-list` page;
- ğŸ†• Enhanced functionality on the offline log replay page, supporting layout adjustment via drag-and-drop and playback speed adjustment;
- ğŸ†• The mini-program now supports sending code for remote execution on the client side;

## More...

  For earlier release details, please visit the [Release](https://github.com/HuolalaTech/page-spy-web/releases) page.
